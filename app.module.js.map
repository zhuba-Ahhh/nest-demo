{"version":3,"sources":["../src/app.module.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-unused-vars */\nimport { MiddlewareConsumer, Module, NestModule } from '@nestjs/common';\nimport { ProductsModule } from './products/products.module';\nimport { TypeOrmModule } from '@nestjs/typeorm';\nimport { UserModule } from './user/user.module';\nimport { UsersModule } from './users/users.module';\nimport { ConfigModule } from '@nestjs/config';\nimport { AuthModule } from './auth/auth.module';\nimport { APP_FILTER } from '@nestjs/core';\nimport { UnauthorizedExceptionFilter } from './utils/catch.error';\nimport env from './env';\n\n@Module({\n  imports: [\n    ConfigModule.forRoot({\n      envFilePath: '.env.development',\n    }),\n    TypeOrmModule.forRootAsync({\n      useFactory: () => ({\n        type: process.env.TYPE || env.TYPE || 'mysql',\n        host: process.env.DB_HOST || env.DB_HOST,\n        port: +(process.env.DB_PORT || env.DB_PORT),\n        username: process.env.DB_USERNAME || env.DB_USERNAME,\n        password: process.env.DB_PASSWORD || env.DB_PASSWORD,\n        database: process.env.DB_DATABASE || env.DB_DATABASE,\n        autoLoadEntities: true,\n        // entities: [__dirname + '/**/*.entity{.ts,.js}'], // 扫描本项目中.entity.ts或者.entity.js的文件\n        synchronize: true,\n      }),\n    }),\n    ProductsModule,\n    UsersModule,\n    UserModule,\n    // AuthModule, // 鉴权\n  ],\n  controllers: [],\n  providers: [\n    {\n      provide: APP_FILTER,\n      useClass: UnauthorizedExceptionFilter,\n    },\n  ],\n})\nexport class AppModule implements NestModule {\n  configure(consumer: MiddlewareConsumer) {\n    if (consumer) {\n    }\n    // ... middleware configurations\n  }\n}\n"],"names":["AppModule","configure","consumer","Module","imports","ConfigModule","forRoot","envFilePath","TypeOrmModule","forRootAsync","useFactory","type","process","env","TYPE","host","DB_HOST","port","DB_PORT","username","DB_USERNAME","password","DB_PASSWORD","database","DB_DATABASE","autoLoadEntities","synchronize","ProductsModule","UsersModule","UserModule","controllers","providers","provide","APP_FILTER","useClass","UnauthorizedExceptionFilter"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":"AAAA,oDAAoD;;;;+BA2CvCA;;;eAAAA;;;wBA1C0C;gCACxB;yBACD;4BACH;6BACC;wBACC;sBAEF;4BACiB;4DAC5B;;;;;;;;;;;;AAiCT,IAAA,AAAMA,YAAN,MAAMA;IACXC,UAAUC,QAA4B,EAAE;QACtC,IAAIA,UAAU,CACd;IACA,gCAAgC;IAClC;AACF;AANaF;IA/BZG,IAAAA,cAAM,EAAC;QACNC,SAAS;YACPC,oBAAY,CAACC,OAAO,CAAC;gBACnBC,aAAa;YACf;YACAC,sBAAa,CAACC,YAAY,CAAC;gBACzBC,YAAY,IAAO,CAAA;wBACjBC,MAAMC,QAAQC,GAAG,CAACC,IAAI,IAAID,YAAG,CAACC,IAAI,IAAI;wBACtCC,MAAMH,QAAQC,GAAG,CAACG,OAAO,IAAIH,YAAG,CAACG,OAAO;wBACxCC,MAAM,CAAEL,CAAAA,QAAQC,GAAG,CAACK,OAAO,IAAIL,YAAG,CAACK,OAAO,AAAD;wBACzCC,UAAUP,QAAQC,GAAG,CAACO,WAAW,IAAIP,YAAG,CAACO,WAAW;wBACpDC,UAAUT,QAAQC,GAAG,CAACS,WAAW,IAAIT,YAAG,CAACS,WAAW;wBACpDC,UAAUX,QAAQC,GAAG,CAACW,WAAW,IAAIX,YAAG,CAACW,WAAW;wBACpDC,kBAAkB;wBAClB,sFAAsF;wBACtFC,aAAa;oBACf,CAAA;YACF;YACAC,8BAAc;YACdC,wBAAW;YACXC,sBAAU;SAEX;QACDC,aAAa,EAAE;QACfC,WAAW;YACT;gBACEC,SAASC,gBAAU;gBACnBC,UAAUC,uCAA2B;YACvC;SACD;IACH;GACanC"}
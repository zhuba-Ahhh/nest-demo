{"version":3,"sources":["../../src/auth/auth.controller.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-unused-vars */\n// src/auth/auth.controller.ts\nimport {\n  Body,\n  Controller,\n  HttpCode,\n  HttpStatus,\n  Post,\n  HttpException,\n} from '@nestjs/common';\nimport { SignInDto } from './dto/sign-in.dto';\nimport { Public } from 'src/common/decorators/public.decorator';\nimport { AuthService } from './auth.service';\nimport { SignUpDto } from './dto/sign-up.dto';\nimport { ResultDto } from 'src/utils/result.dto';\n\n@Controller('auth')\nexport class AuthController {\n  constructor(private readonly authService: AuthService) {}\n\n  @Public()\n  @Post('sign-up')\n  async signUp(@Body() signUpDto: SignUpDto): Promise<ResultDto> {\n    try {\n      const result = await this.authService.signUp(signUpDto);\n      if (result) {\n        return new ResultDto(true, HttpStatus.CREATED, '用户注册成功', result);\n      } else {\n        // 如果注册失败，返回相应的错误码和消息\n        return new ResultDto(false, HttpStatus.BAD_REQUEST, '用户注册失败');\n      }\n    } catch (error) {\n      console.error('Error during sign-up:', error);\n      throw new HttpException(\n        new ResultDto(false, HttpStatus.INTERNAL_SERVER_ERROR, error.message),\n        HttpStatus.INTERNAL_SERVER_ERROR,\n      );\n    }\n  }\n\n  @Public()\n  @Post('sign-in')\n  async signIn(@Body() signInDto: SignInDto): Promise<ResultDto> {\n    try {\n      const result = await this.authService.signIn(signInDto);\n      if (result) {\n        return new ResultDto(true, HttpStatus.OK, '用户登录成功', result);\n      } else {\n        // 如果登录失败，返回相应的错误码和消息\n        return new ResultDto(false, HttpStatus.BAD_REQUEST, '用户登录失败');\n      }\n    } catch (error) {\n      throw new HttpException(\n        new ResultDto(false, HttpStatus.INTERNAL_SERVER_ERROR, error.message),\n        HttpStatus.INTERNAL_SERVER_ERROR,\n      );\n    }\n  }\n}\n"],"names":["AuthController","signUp","signUpDto","result","authService","ResultDto","HttpStatus","CREATED","BAD_REQUEST","error","console","HttpException","INTERNAL_SERVER_ERROR","message","signIn","signInDto","OK","constructor","Public","Post","Body","Controller"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":"AAAA,oDAAoD,GACpD,8BAA8B;;;;;+BAgBjBA;;;eAAAA;;;wBARN;2BACmB;iCACH;6BACK;2BACF;2BACA;;;;;;;;;;;;;;;AAGnB,IAAA,AAAMA,iBAAN,MAAMA;IAGX,MAEMC,OAAO,AAAQC,SAAoB,EAAsB;QAC7D,IAAI;YACF,MAAMC,SAAS,MAAM,IAAI,CAACC,WAAW,CAACH,MAAM,CAACC;YAC7C,IAAIC,QAAQ;gBACV,OAAO,IAAIE,oBAAS,CAAC,MAAMC,kBAAU,CAACC,OAAO,EAAE,UAAUJ;YAC3D,OAAO;gBACL,qBAAqB;gBACrB,OAAO,IAAIE,oBAAS,CAAC,OAAOC,kBAAU,CAACE,WAAW,EAAE;YACtD;QACF,EAAE,OAAOC,OAAO;YACdC,QAAQD,KAAK,CAAC,yBAAyBA;YACvC,MAAM,IAAIE,qBAAa,CACrB,IAAIN,oBAAS,CAAC,OAAOC,kBAAU,CAACM,qBAAqB,EAAEH,MAAMI,OAAO,GACpEP,kBAAU,CAACM,qBAAqB;QAEpC;IACF;IAEA,MAEME,OAAO,AAAQC,SAAoB,EAAsB;QAC7D,IAAI;YACF,MAAMZ,SAAS,MAAM,IAAI,CAACC,WAAW,CAACU,MAAM,CAACC;YAC7C,IAAIZ,QAAQ;gBACV,OAAO,IAAIE,oBAAS,CAAC,MAAMC,kBAAU,CAACU,EAAE,EAAE,UAAUb;YACtD,OAAO;gBACL,qBAAqB;gBACrB,OAAO,IAAIE,oBAAS,CAAC,OAAOC,kBAAU,CAACE,WAAW,EAAE;YACtD;QACF,EAAE,OAAOC,OAAO;YACd,MAAM,IAAIE,qBAAa,CACrB,IAAIN,oBAAS,CAAC,OAAOC,kBAAU,CAACM,qBAAqB,EAAEH,MAAMI,OAAO,GACpEP,kBAAU,CAACM,qBAAqB;QAEpC;IACF;IAvCAK,YAAY,AAAiBb,WAAwB,CAAE;aAA1BA,cAAAA;IAA2B;AAwC1D;;IAtCGc,IAAAA,uBAAM;IACNC,IAAAA,YAAI,EAAC;IACQC,aAAAA,IAAAA,YAAI;;;eAAc,oBAAS,4BAAT,oBAAS;;;GAL9BpB;;IAuBVkB,IAAAA,uBAAM;IACNC,IAAAA,YAAI,EAAC;IACQC,aAAAA,IAAAA,YAAI;;;eAAc,oBAAS,4BAAT,oBAAS;;;GAzB9BpB;AAAAA;IADZqB,IAAAA,kBAAU,EAAC;;;eAEgC,wBAAW,4BAAX,wBAAW;;GAD1CrB"}